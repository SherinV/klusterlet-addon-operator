# Licensed Materials - Property of IBM
# IBM Confidential
# OCO Source Materials
# (C) Copyright IBM Corporation 2016, 2019 All Rights Reserved
# The source code for this program is not published or otherwise divested of its trade secrets, irrespective of what has been deposited with the U.S. Copyright Office.

---
kind: Service
apiVersion: v1
metadata:
  labels:
    # name: {{ template "tiller.fullname" . }}
    # app: {{ template "tiller.name" . }}
    # chart: {{ template "tiller.chart" . }}
    # release: {{ .Release.Name }}
    # component: "tiller"
    # heritage: {{ .Release.Service }}
    app: helm
    name: tiller
  name: {{ template "tiller.fullname" . }}
spec:
  {{- if .Values.random_ip_enabled }}
  clusterIP: "{{ .Values.tiller_service_ip }}"
  {{- end}}
  type: {{ .Values.tiller_service_type}}
  ports:
  - name: grpc
    protocol: TCP
    port: 44134
    targetPort: 44134
    {{- if eq .Values.tiller_service_type "NodePort" }}
    nodePort: {{ .Values.tiller_service_nodeport }}
    {{- end }}
  selector:
    app: helm
    name: tiller
