# Licensed Materials - Property of IBM
# 5737-E67
# (C) Copyright IBM Corporation 2016, 2019 All Rights Reserved
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

---
external:
  __metadata:
    name: "external"
    label: "External"
    description: "External settings"
  cluster_ip:
    __metadata:
      name: "external.cluster_ip"
      label: "Cluster external IP address"
      description: "The external IP address of the cluster"
      type: "string"
      immutable: false
      required: true
  cluster_port:
    __metadata:
      name: "external.cluster_port"
      label: "Cluster external port"
      description: "The external port of the cluster"
      type: "number"
      immutable: false
      required: true
  cluster_name:
    __metadata:
      name: "external.cluster_name"
      label: "Cluster name"
      description: "The name of the cluster"
      type: "string"
      immutable: false
      required: true

arch:
  __metadata:
    name: "Architecture"
    label: "Node architecture"
    description: "Node architecture to deploy to. The helm chart will try to detect the architecture based on the master node."
    type: "string"
    immutable: false
    required: false
    options:
      - label: "amd64"
        value: "amd64"
      - label: "ppc64le"
        value: "ppc64le"
      - label: "s390x"
        value: "s390x"

mongo:
  __metadata:
    name: "mongo"
    label: "MongoDB"
    description: "External settings"
  host:
    __metadata:
      name: "mongo.host"
      label: "MongoDB service name"
      description: "The service name of the MongoDB service"
      type: "string"
      immutable: true
      required: true
  port: 
    __metadata:
      name: "mongo.port"
      label: "MongoDB service port"
      description: "The service port of the MongoDB service"
      type: "number"
      immutable: true
      required: true
  username:
    secret:
      __metadata:
        name: "mongo.username.secret"
        label: "MongoDB username secret name"
        description: "The name of the secret containing the MongoDB user name"
        type: "string"
        immutable: true
        required: true
    key:
      __metadata:
        name: "mongo.username.key"
        label: "MongoDB username secret key name"
        description: "The key name of the user name in the MongoDB secret"
        type: "string"
        immutable: true
        required: true
  password:
    secret:
      __metadata:
        name: "mongo.password.secret"
        label: "MongoDB password secret name"
        description: "The name of the secret containing the MongoDB password"
        type: "string"
        immutable: true
        required: true
    key:
      __metadata:
        name: "mongo.password.key"
        label: "MongoDB password secret key name"
        description: "The key name of the password in the MongoDB secret"
        type: "string"
        immutable: true
        required: true
  clustercertssecret:
    __metadata:
      name: "mongo.clustercertssecret"
      label: "MongoDB CA certificate secret name"
      description: "The name of the secret containing the CA certificate of the MongoDB service"
      type: "string"
      immutable: true
      required: true
  clientcertssecret:
    __metadata:
      name: "mongo.clientcertssecret"
      label: "MongoDB client certificate secret name"
      description: "The name of the secret containing the client certificate of the MongoDB service"
      type: "string"
      immutable: true
      required: true      

api:
  __metadata:
    name: "api"
    label: "Metering API"
    description: "Metering API enablement"
    hidden: true
  enabled:
    __metadata:
      name: "api.enabled"
      label: "API enabled"
      description: "Controls enablement of metering API"
      hidden: true

dm:
  __metadata:
    name: "dm"
    label: "Data Manager"
    description: "Metering data manager component"
  enabled:
    __metadata:
      name: "dm.enabled"
      label: "Data manager enabled"
      description: "Controls enablement of the data manager component"
      hidden: true
  image:
    repository:
      __metadata:
        name: "dm.image.repository"
        label: "Repository"
        description: "Docker image location"
        type: "string"
        immutable: true
        required: true      
    tag:
      __metadata:
        name: "dm.image.tag"
        label: "Tag"
        description: "Docker image tag"
        type: "string"
        immutable: true
        required: true      
    pullPolicy:    
      __metadata:
        name: "dm.image.pullPolicy"
        label: "Image pull policy"
        description: "Docker image pull policy"
        type: "string"
        immutable: true
        required: true      
        options:
        - label: "Always"
          value: "Always"
        - label: "Never"
          value: "Never"
        - label: "IfNotPresent"
          value: "IfNotPresent"

  resources:
    requests:
      cpu:
        __metadata:
          name: "dm.resources.requests.cpu"
          label: "Requested CPU"
          description: "Requested CPU amount"
          type: "string"
          immutable: false
          required: false      
      memory:
        __metadata:
          name: "dm.resources.requests.memory"
          label: "Requested memory"
          description: "Requested memory amount"
          type: "string"
          immutable: false
          required: false
    limits:
      cpu:
        __metadata:
          name: "dm.resources.limits.cpu"
          label: "CPU limit"
          description: "CPU limit for data manager"
          type: "string"
          immutable: false
          required: false      
      memory:
        __metadata:
          name: "dm.resources.limits.memory"
          label: "Memory limit"
          description: "Memory limit for data manager"
          type: "string"
          immutable: false
          required: false
  
  init:
    resources:
      requests:
        cpu:
          __metadata:
            name: "dm.init.resources.requests.cpu"
            label: "Requested CPU"
            description: "Init container requested CPU amount"
            type: "string"
            immutable: false
            required: false      
        memory:
          __metadata:
            name: "dm.init.resources.requests.memory"
            label: "Requested memory"
            description: "Init container requested memory amount"
            type: "string"
            immutable: false
            required: false  
      limits:
        cpu:
          __metadata:
            name: "dm.init.resources.limits.cpu"
            label: "CPU limit"
            description: "Init container CPU limit for reader"
            type: "string"
            immutable: false
            required: false      
        memory:
          __metadata:
            name: "dm.init.resources.limits.memory"
            label: "Memory limit"
            description: "Init container memory limit for reader"
            type: "string"
            immutable: false
            required: false

  nodeSelector:
    management:
      __metadata:
        name: "dm.nodeSelector.management"
        label: "Management node selector"
        description: "Determines whether the component is scheduled on the management node"
        hidden: true

  tolerations:
    __metadata:
      name: "dm.tolerations"
      label: "Data Manager tolerations"
      description: "Data Manager tolerations settings"
      hidden: true


ui:
  __metadata:
    name: "ui"
    label: "Console"
    description: "Metering console component"
  enabled:
    __metadata:
      name: "ui.enabled"
      label: "Console enabled"
      description: "Controls enablement of the console"
      hidden: true
  
  image:
    repository:
      __metadata:
        name: "ui.image.repository"
        label: "Repository"
        description: "Docker image location"
        type: "string"
        immutable: true
        required: true      
    tag:
      __metadata:
        name: "ui.image.tag"
        label: "Tag"
        description: "Docker image tag"
        type: "string"
        immutable: true
        required: true      
    pullPolicy:    
      __metadata:
        name: "ui.image.pullPolicy"
        label: "Image pull policy"
        description: "Docker image pull policy"
        type: "string"
        immutable: true
        required: true      
        options:
        - label: "Always"
          value: "Always"
        - label: "Never"
          value: "Never"
        - label: "IfNotPresent"
          value: "IfNotPresent"

  nodeSelector:
    management:
      __metadata:
        name: "ui.nodeSelector.management"
        label: "Node selector for management node"
        description: "Determines if the component should be scheduled on the managemant node"
        type: "string"
        immutable: true
        required: true

  resources:
    requests:
      cpu:
        __metadata:
          name: "ui.resources.requests.cpu"
          label: "Requested CPU"
          description: "Requested CPU amount"
          type: "string"
          immutable: false
          required: false      
      memory:
        __metadata:
          name: "ui.resources.requests.memory"
          label: "Requested memory"
          description: "Requested memory amount"
          type: "string"
          immutable: false
          required: false
    limits:
      cpu:
        __metadata:
          name: "ui.resources.limits.cpu"
          label: "CPU limit"
          description: "CPU limit for console"
          type: "string"
          immutable: false
          required: false      
      memory:
        __metadata:
          name: "ui.resources.limits.memory"
          label: "Memory limit"
          description: "Memory limit for console"
          type: "string"
          immutable: false
          required: false      
  tolerations:
    __metadata:
      name: "ui.tolerations"
      label: "Console tolerations"
      description: "Console tolerations settings"
      hidden: true
  
  init:
    resources:
      requests:
        cpu:
          __metadata:
            name: "ui.init.resources.requests.cpu"
            label: "Requested CPU"
            description: "Init container requested CPU amount"
            type: "string"
            immutable: false
            required: false      
        memory:
          __metadata:
            name: "ui.init.resources.requests.memory"
            label: "Requested memory"
            description: "Init container requested memory amount"
            type: "string"
            immutable: false
            required: false  
      limits:
        cpu:
          __metadata:
            name: "ui.init.resources.limits.cpu"
            label: "CPU limit"
            description: "Init container CPU limit for reader"
            type: "string"
            immutable: false
            required: false      
        memory:
          __metadata:
            name: "ui.init.resources.limits.memory"
            label: "Memory limit"
            description: "Init container memory limit for reader"
            type: "string"
            immutable: false
            required: false


mcmui:
  __metadata:
    name: "mcmui"
    label: "Multcloud Console"
    description: "Metering multicloud console component"
  enabled:
    __metadata:
      name: "mcmui.enabled"
      label: "Mutlicloud console enabled"
      description: "Controls enablement of the multicloud console"
      hidden: true

  image:
    repository:
      __metadata:
        name: "mcmui.image.repository"
        label: "Repository"
        description: "Docker image location"
        type: "string"
        immutable: true
        required: true      
    tag:
      __metadata:
        name: "mcmui.image.tag"
        label: "Tag"
        description: "Docker image tag"
        type: "string"
        immutable: true
        required: true      
    pullPolicy:    
      __metadata:
        name: "mcmui.image.pullPolicy"
        label: "Image pull policy"
        description: "Docker image pull policy"
        type: "string"
        immutable: true
        required: true      
        options:
        - label: "Always"
          value: "Always"
        - label: "Never"
          value: "Never"
        - label: "IfNotPresent"
          value: "IfNotPresent"

  nodeSelector:
    management:
      __metadata:
        name: "mcmui.nodeSelector.management"
        label: "Node selector for management node"
        description: "Determines if the component should be scheduled on the managemant node"
        type: "string"
        immutable: true
        required: true

  tolerations:
    __metadata:
      name: "mcmui.tolerations"
      label: "Multicloud console tolerations"
      description: "Multicloud console tolerations settings"
      hidden: true

  resources:
    requests:
      cpu:
        __metadata:
          name: "mcmui.resources.requests.cpu"
          label: "Requested CPU"
          description: "Requested CPU amount"
          type: "string"
          immutable: false
          required: false      
      memory:
        __metadata:
          name: "mcmui.resources.requests.memory"
          label: "Requested memory"
          description: "Requested memory amount"
          type: "string"
          immutable: false
          required: false
    limits:
      cpu:
        __metadata:
          name: "mcmui.resources.limits.cpu"
          label: "CPU limit"
          description: "CPU limit for the multicloud console"
          type: "string"
          immutable: false
          required: false      
      memory:
        __metadata:
          name: "mcmui.resources.limits.memory"
          label: "Memory limit"
          description: "Memory limit for the multicloud console"
          type: "string"
          immutable: false
          required: false      

  init:
    resources:
      requests:
        cpu:
          __metadata:
            name: "mcmui.init.resources.requests.cpu"
            label: "Requested CPU"
            description: "Init container requested CPU amount"
            type: "string"
            immutable: false
            required: false      
        memory:
          __metadata:
            name: "mcmui.init.resources.requests.memory"
            label: "Requested memory"
            description: "Init container requested memory amount"
            type: "string"
            immutable: false
            required: false  
      limits:
        cpu:
          __metadata:
            name: "mcmui.init.resources.limits.cpu"
            label: "CPU limit"
            description: "Init container CPU limit for reader"
            type: "string"
            immutable: false
            required: false      
        memory:
          __metadata:
            name: "mcmui.init.resources.limits.memory"
            label: "Memory limit"
            description: "Init container memory limit for reader"
            type: "string"
            immutable: false
            required: false

reader:
  __metadata:
    name: "reader"
    label: "Reader"
    description: "Metering reader component"
  image:
    repository:
      __metadata:
        name: "reader.image.repository"
        label: "Repository"
        description: "Docker image location"
        type: "string"
        immutable: true
        required: true      
    tag:
      __metadata:
        name: "reader.image.tag"
        label: "Tag"
        description: "Docker image tag"
        type: "string"
        immutable: true
        required: true      
    pullPolicy:    
      __metadata:
        name: "reader.image.pullPolicy"
        label: "Image pull policy"
        description: "Docker image pull policy"
        type: "string"
        immutable: true
        required: true      
        options:
        - label: "Always"
          value: "Always"
        - label: "Never"
          value: "Never"
        - label: "IfNotPresent"
          value: "IfNotPresent"

  resources:
    requests:
      cpu:
        __metadata:
          name: "reader.resources.requests.cpu"
          label: "Requested CPU"
          description: "Requested CPU amount"
          type: "string"
          immutable: false
          required: false      
      memory:
        __metadata:
          name: "reader.resources.requests.memory"
          label: "Requested memory"
          description: "Requested memory amount"
          type: "string"
          immutable: false
          required: false  
    limits:
      cpu:
        __metadata:
          name: "reader.resources.limits.cpu"
          label: "CPU limit"
          description: "CPU limit for reader"
          type: "string"
          immutable: false
          required: false      
      memory:
        __metadata:
          name: "reader.resources.limits.memory"
          label: "Memory limit"
          description: "Memory limit for reader"
          type: "string"
          immutable: false
          required: false
  init:
    resources:
      requests:
        cpu:
          __metadata:
            name: "reader.init.resources.requests.cpu"
            label: "Requested CPU"
            description: "Init container requested CPU amount"
            type: "string"
            immutable: false
            required: false      
        memory:
          __metadata:
            name: "reader.init.resources.requests.memory"
            label: "Requested memory"
            description: "Init container requested memory amount"
            type: "string"
            immutable: false
            required: false  
      limits:
        cpu:
          __metadata:
            name: "reader.init.resources.limits.cpu"
            label: "CPU limit"
            description: "Init container CPU limit for reader"
            type: "string"
            immutable: false
            required: false      
        memory:
          __metadata:
            name: "reader.init.resources.limits.memory"
            label: "Memory limit"
            description: "Init container memory limit for reader"
            type: "string"
            immutable: false
            required: false

  tolerations:
    __metadata:
      name: "reader.tolerations"
      label: "Reader tolerations"
      description: "Reader tolerations settings"
      hidden: true

  tolerations:
    __metadata:
      name: "reader.tolerations"
      label: "Reader tolerations"
      description: "Reader tolerations settings"
      hidden: true

sender:
  __metadata:
    name: "sender"
    label: "Data Sender"
    description: "Metering data sender component"
    hidden: true
  enabled:
    __metadata:
      name: "sender.enabled"
      label: "Data sender enabled"
      description: "Controls enablement of the data sender component"
      hidden: true
  clusterName:
    __metadata:
      name: "sender.clusterName"
      label: "Data sender cluster name"
      description: "Name of the cluster the sender is deployed to"
      hidden: true  
  clusterNamespace:
    __metadata:
      name: "sender.clusterNamespace"
      label: "Data sender cluster namespace"
      description: "Namespace of the cluster the sender is deployed to"
      hidden: true  
  hubKubeConfigSecret:
    __metadata:
      name: "sender.hubKubeConfigSecret"
      label: "Hube kube config secret"
      description: "Name of the secret containing the kube config for the destination hub"
      hidden: true  
  image:
    repository:
      __metadata:
        name: "sender.image.repository"
        label: "Repository"
        description: "Docker image location"
        type: "string"
        immutable: true
        required: true      
        hidden: true
    tag:
      __metadata:
        name: "sender.image.tag"
        label: "Tag"
        description: "Docker image tag"
        type: "string"
        immutable: true
        required: true      
        hidden: true
    pullPolicy:    
      __metadata:
        name: "sender.image.pullPolicy"
        label: "Image pull policy"
        description: "Docker image pull policy"
        type: "string"
        immutable: true
        required: true      
        options:
        - label: "Always"
          value: "Always"
        - label: "Never"
          value: "Never"
        - label: "IfNotPresent"
          value: "IfNotPresent"
        hidden: true

  resources:
    requests:
      cpu:
        __metadata:
          name: "sender.resources.requests.cpu"
          label: "Requested CPU"
          description: "Requested CPU amount"
          type: "string"
          immutable: false
          required: false      
          hidden: true
      memory:
        __metadata:
          name: "sender.resources.requests.memory"
          label: "Requested memory"
          description: "Requested memory amount"
          type: "string"
          immutable: false
          required: false
          hidden: true
    limits:
      cpu:
        __metadata:
          name: "sender.resources.limits.cpu"
          label: "CPU limit"
          description: "CPU limit for data sender"
          type: "string"
          immutable: false
          required: false      
          hidden: true
      memory:
        __metadata:
          name: "sender.resources.limits.memory"
          label: "Memory limit"
          description: "Memory limit for data sender"
          type: "string"
          immutable: false
          required: false      
          hidden: true

  nodeSelector:
    management:
      __metadata:
        name: "sender.nodeSelector.management"
        label: "Management node selector"
        description: "Determines whether the component is scheduled on the management node"
        hidden: true

  tolerations:
    __metadata:
      name: "sender.tolerations"
      label: "Data Sender tolerations"
      description: "Data Sender tolerations settings"
      hidden: true


secretcheck:
  __metadata:
    name: "secretcheck"
    label: "Secret check"
    description: "Secret check function definition"
    hidden: true
  command:
    __metadata:
      name: "command"
      label: "Secret check command"
      description: "Secret check function definition"
      hidden: true

serviceport:
  __metadata:
    name: "serviceport"
    label: "Service port"
    description: "Service port settings"
  iam_token:
    __metadata:
      name: "serviceport.iam_token"
      label: "IAM Token"
      description: "IAM token service port"
      type: "number"
      immutable: true
      required: true 
  iam_pap:
    __metadata:
      name: "serviceport.iam_pap"
      label: "IAM PAP"
      description: "IAM PAP service port"
      type: "number"
      immutable: true
      required: true
  platform_identity_management:
    __metadata:
      name: "serviceport.platform_identity_management"
      label: "Platform Identity Management"
      description: "Platform identity management service port"
      type: "number"
      immutable: true
      required: true
  platform_header:
    __metadata:
      name: "serviceport.platform_header"
      label: "Platform Header"
      description: "Platform header service port"
      type: "number"
      immutable: true
      required: true
    
ingress:
  __metadata:
    name: "ingress"
    label: "Ingress configuration"
    description: "Ingresss spec for rule enforcement"
  host:
    __metadata:
      name: "ingress.host"
      label: "Ingress host"
      description: "Host to apply ingress rules"
      type: "string"