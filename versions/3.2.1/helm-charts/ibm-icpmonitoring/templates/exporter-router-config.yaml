# Licensed Materials - Property of IBM
# 5737-E67
# (C) Copyright IBM Corporation 2016, 2019 All Rights Reserved
# US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.

{{- if .Values.tls.enabled -}}

apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: {{ template "prometheus.fullname" . }}
    chart: {{ .Chart.Name }}-{{ .Chart.Version }}
    release: {{ .Release.Name }}
    heritage: {{ .Release.Service }}
  name: {{ template "prometheus.fullname" . }}-exporter-router-nginx-config
data:
 elasticsearchexporter.nginx.conf: |-
    {{ include "router.nginx.config" (list 9108 8443 .Values.tls.ca.certFieldName .Values.tls.sslCiphers) }}
 kubestateexporter.nginx.conf: |-
    {{ include "router.nginx.config" (list 8080 8443 .Values.tls.ca.certFieldName .Values.tls.sslCiphers) }}
 collectdexporter.nginx.conf: |-
    {{ include "router.nginx.config" (list 9103 8443 .Values.tls.ca.certFieldName .Values.tls.sslCiphers) }}
 nodeexporter.nginx.conf: |-
    {{ include "router.nginx.config" (list .Values.nodeExporter.listenPort .Values.nodeExporter.port .Values.tls.ca.certFieldName .Values.tls.sslCiphers .Values.nodeExporter.healthyPort) }}
{{- end -}}